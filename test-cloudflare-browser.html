<!DOCTYPE html>
<html>
<head>
    <title>EC2 to Cloudflare Connection Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .pending { background: #fff3cd; color: #856404; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>üîç EC2 to Cloudflare Connection Test</h1>
    
    <button onclick="runAllTests()">Run All Tests</button>
    <button onclick="clearResults()">Clear Results</button>
    
    <div id="results"></div>

    <script>
        const ENDPOINTS = {
            'Cloudflare Domain': 'https://api-staging.zyncjobs.com',
            'Direct EC2': 'http://3.110.178.223:5000'
        };

        async function testEndpoint(name, url) {
            const resultDiv = document.getElementById('results');
            const testDiv = document.createElement('div');
            testDiv.className = 'test pending';
            testDiv.innerHTML = `üîÑ Testing ${name}: ${url}`;
            resultDiv.appendChild(testDiv);

            try {
                const response = await fetch(`${url}/api/test`, {
                    method: 'GET',
                    mode: 'cors',
                    headers: { 'Accept': 'application/json' }
                });
                
                const data = await response.text();
                testDiv.className = 'test success';
                testDiv.innerHTML = `‚úÖ ${name} - Status: ${response.status}<br>Response: ${data}`;
            } catch (error) {
                testDiv.className = 'test error';
                testDiv.innerHTML = `‚ùå ${name} - Error: ${error.message}`;
            }
        }

        async function runAllTests() {
            document.getElementById('results').innerHTML = '<h2>Test Results:</h2>';
            
            for (const [name, url] of Object.entries(ENDPOINTS)) {
                await testEndpoint(name, url);
                await new Promise(resolve => setTimeout(resolve, 1000)); // 1s delay
            }
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
    </script>
</body>
</html>