// Google Meet Integration Example for Frontend

class GoogleMeetService {
  constructor() {\n    this.baseURL = 'http://localhost:5000/api';\n  }\n\n  // Step 1: Get Google authorization URL\n  async getAuthUrl() {\n    try {\n      const response = await fetch(`${this.baseURL}/auth/google/auth-url`, {\n        method: 'GET',\n        credentials: 'include'\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        return data.authUrl;\n      } else {\n        throw new Error('Failed to get authorization URL');\n      }\n    } catch (error) {\n      console.error('Error getting auth URL:', error);\n      throw error;\n    }\n  }\n\n  // Step 2: Redirect user to Google OAuth\n  async authorizeGoogle() {\n    try {\n      const authUrl = await this.getAuthUrl();\n      window.location.href = authUrl;\n    } catch (error) {\n      console.error('Authorization failed:', error);\n      alert('Failed to start Google authorization');\n    }\n  }\n\n  // Step 3: Create Google Meet (after authorization)\n  async createGoogleMeet(meetingData) {\n    try {\n      const response = await fetch(`${this.baseURL}/auth/google/create-meet`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({ meetingData })\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        return {\n          success: true,\n          meetLink: data.meeting.joinUrl,\n          meetingId: data.meeting.meetingId,\n          fallback: data.meeting.fallback || false\n        };\n      } else if (data.requiresAuth) {\n        // Need to authorize first\n        const shouldAuth = confirm('Google authorization required. Authorize now?');\n        if (shouldAuth) {\n          await this.authorizeGoogle();\n        }\n        return { success: false, requiresAuth: true };\n      } else {\n        throw new Error(data.error || 'Failed to create Google Meet');\n      }\n    } catch (error) {\n      console.error('Error creating Google Meet:', error);\n      throw error;\n    }\n  }\n\n  // Alternative: Create simple Google Meet link (no calendar integration)\n  async createSimpleMeet(meetingData) {\n    try {\n      const response = await fetch(`${this.baseURL}/meetings/generate-meet`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(meetingData)\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        return {\n          success: true,\n          meetLink: data.meeting.meetLink,\n          meetingId: data.meeting.meetingId\n        };\n      } else {\n        throw new Error(data.error || 'Failed to create Google Meet');\n      }\n    } catch (error) {\n      console.error('Error creating simple Google Meet:', error);\n      throw error;\n    }\n  }\n}\n\n// Usage Example:\n/*\nconst googleMeetService = new GoogleMeetService();\n\n// For simple Meet link (no authorization needed)\nasync function createSimpleMeetLink() {\n  try {\n    const meetingData = {\n      summary: 'Interview with John Doe',\n      start: new Date().toISOString(),\n      duration: 60\n    };\n    \n    const result = await googleMeetService.createSimpleMeet(meetingData);\n    console.log('Meet link:', result.meetLink);\n  } catch (error) {\n    console.error('Failed to create meet link:', error);\n  }\n}\n\n// For calendar-integrated Meet link (requires authorization)\nasync function createCalendarMeetLink() {\n  try {\n    const meetingData = {\n      topic: 'Interview with John Doe',\n      start_time: new Date().toISOString(),\n      duration: 60,\n      description: 'Technical interview for Software Engineer position',\n      attendees: [\n        { email: 'candidate@example.com' },\n        { email: 'interviewer@example.com' }\n      ]\n    };\n    \n    const result = await googleMeetService.createGoogleMeet(meetingData);\n    \n    if (result.success) {\n      console.log('Meet link:', result.meetLink);\n      if (result.fallback) {\n        console.log('Note: Using fallback link (no calendar integration)');\n      }\n    }\n  } catch (error) {\n    console.error('Failed to create meet link:', error);\n  }\n}\n\n// Handle OAuth callback (add this to your dashboard page)\nfunction handleGoogleAuthCallback() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const authStatus = urlParams.get('google_auth');\n  \n  if (authStatus === 'success') {\n    alert('Google authorization successful! You can now create calendar-integrated Meet links.');\n    // Remove the parameter from URL\n    window.history.replaceState({}, document.title, window.location.pathname);\n  } else if (authStatus === 'error') {\n    alert('Google authorization failed. You can still create simple Meet links.');\n    window.history.replaceState({}, document.title, window.location.pathname);\n  }\n}\n\n// Call this when the page loads\nif (window.location.search.includes('google_auth')) {\n  handleGoogleAuthCallback();\n}\n*/\n\nexport default GoogleMeetService;